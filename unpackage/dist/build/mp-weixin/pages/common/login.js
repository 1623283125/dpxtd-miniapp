(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/common/login"],{"1a25":function(e,t,n){"use strict";n.r(t);var i=n("43e4"),o=n("6ae2");for(var u in o)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(u);n("edd1");var s=n("828b"),a=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"49fdebf1",null,!1,i["a"],void 0);t["default"]=a.exports},"1e63":function(e,t,n){"use strict";(function(e,t){var i=n("47a9");n("4208"),n("e230");i(n("3240"));var o=i(n("1a25"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"424a":function(e,t,n){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{isReload:!1,isWxAuth:!1,isAgree:!1,isRegister:!1,model:{wxOpenId:"",sessionKey:"",userName:"",password:""},form:{username:"",password:"",password1:""}}},onLoad:function(e){e&&"ok"===e.reload&&(this.isReload=!0),this.initData()},methods:{initData:function(){this.isWxAuth&&this.getWxCode()},btnShowRegister:function(){this.isRegister=!0},btnShowLogin:function(){this.isRegister=!1},btLogin:function(){var e=this;if(this.form.username)if(this.$u.test.mobile(this.form.username))if(this.form.password)if(this.isRegister){if(this.form.password!==this.form.password1)return void this.$u.toast("两次密码不一致");this.$api.register(this.form.username,this.form.password).then((function(t){e.$u.toast(t.data),e.isRegister=!1}))}else this.$api.login(this.form.username,this.form.password).then((function(t){e.$u.toast("登录成功"),e.$u.vuex("_token",t.data),e.reloadData()}));else this.$u.toast("登录密码不能为空");else this.$u.toast("请输入正确的手机号");else this.$u.toast("手机号码不能为空")},btMobileAuthLogin:function(e){var t=this,n=e.detail;if("getPhoneNumber:ok"==n.errMsg){var i={iv:n.iv,nickname:"微信用户".concat(this.wxOpenId),wxOpenId:this.wxOpenId,sessionKey:this.sessionKey,encryptedData:n.encryptedData};this.$api.wxLogin(i).then((function(e){t.$u.vuex("_token",e.data.token),t.reloadData()}))}},reloadData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,i=getCurrentPages(),o=i[i.length-2];o.$vm.initData(),setTimeout((function(){e.navigateBack({delta:t})}),n)},getWxCode:function(){var t=this;e.login({provider:"weixin",success:function(e){var n=e.code;n&&t.$api.getWxOpenId(n).then((function(e){t.wxOpenId=e.data.openId,t.sessionKey=e.data.sessionKey,t.getUserInfo()}))}})},getUserInfo:function(){n.getSetting({success:function(e){e.authSetting["scope.userInfo"]&&n.getUserInfo({success:function(e){}})},fail:function(e){}})},goHomePage:function(){e.navigateBack({delta:2})}}};t.default=i}).call(this,n("df3c")["default"],n("3223")["default"])},"43e4":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return i}));var i={uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"f124"))},uForm:function(){return n.e("uview-ui/components/u-form/u-form").then(n.bind(null,"e5eb"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"d9a88"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-input/u-input")]).then(n.bind(null,"6d0a"))},uCheckboxGroup:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-checkbox-group/u-checkbox-group")]).then(n.bind(null,"0de3"))},uCheckbox:function(){return n.e("uview-ui/components/u-checkbox/u-checkbox").then(n.bind(null,"9014"))},wxxyAgreePrivacy:function(){return Promise.all([n.e("common/vendor"),n.e("components/wxxy-agree-privacy/wxxy-agree-privacy")]).then(n.bind(null,"f836"))}},o=function(){var e=this.$createElement;this._self._c},u=[]},"6ae2":function(e,t,n){"use strict";n.r(t);var i=n("424a"),o=n.n(i);for(var u in i)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(u);t["default"]=o.a},c002:function(e,t,n){},edd1:function(e,t,n){"use strict";var i=n("c002"),o=n.n(i);o.a}},[["1e63","common/runtime","common/vendor"]]]);