{"version":3,"sources":["webpack:////Users/mac/Work/【uniapp】/workProject/uni-dpx/components/comment-list/comment-list.vue?729a","webpack:////Users/mac/Work/【uniapp】/workProject/uni-dpx/components/comment-list/comment-list.vue?a887","webpack:////Users/mac/Work/【uniapp】/workProject/uni-dpx/components/comment-list/comment-list.vue?c3b1","webpack:////Users/mac/Work/【uniapp】/workProject/uni-dpx/components/comment-list/comment-list.vue?ea7e","uni-app:///components/comment-list/comment-list.vue"],"names":["name","props","tid","type","collect","default","data","loading","dataList","isCollect","created","watch","handler","console","immediate","methods","getDataList","targetId","commentType","btnAddComment","comment","content","openid","btnCollect","favoritesType","btnSwitchLike","goUserProfilePage","id"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;;;AAG3D;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,+NAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,uNAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnEA;AAAA;AAAA;AAAA;AAAy1B,CAAgB,0yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC0D72B;EACAA;EACAC;IACAC;MACAC;IACA;IACAA;MACAA;IACA;IACAC;MACAD;MACAE;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAP;MACAQ;QACA;QACA;QACAC;MACA;MACAC;IACA;EACA;EACAC;IACA;IACAC;MAAA;MACA;QACAC;QACAC;MACA;MACA;QACA;QACA;UACAV;QACA;QACA;QACA;MACA;IACA;IACA;IACAW;MAAA;MACA;QACAC;QACAH;QACAC;MACA;MACAL;MACA;QAAAQ;QAAAlB;QAAAmB;MAAA;MACA;QACAT;QACA;UACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAU;MAAA;MACA;QACAN;QACAO;MACA;MACAX;MACA;MACA;QACA;MACA;IACA;IACA;IACAY;MAAA;MACA;QACA;MACA;IACA;IACAC;MACAb;MACA;MACA;QACAc;MACA;IACA;EACA;AACA;AAAA,2B","file":"components/comment-list/comment-list.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./comment-list.vue?vue&type=template&id=7b02c904&\"\nvar renderjs\nimport script from \"./comment-list.vue?vue&type=script&lang=js&\"\nexport * from \"./comment-list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/comment-list/comment-list.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./comment-list.vue?vue&type=template&id=7b02c904&\"","var components\ntry {\n  components = {\n    uLoadmore: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-loadmore/u-loadmore\" */ \"@/uview-ui/components/u-loadmore/u-loadmore.vue\"\n      )\n    },\n    uEmpty: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-empty/u-empty\" */ \"@/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    uAvatar: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-avatar/u-avatar\" */ \"@/uview-ui/components/u-avatar/u-avatar.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uRate: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-rate/u-rate\" */ \"@/uview-ui/components/u-rate/u-rate.vue\"\n      )\n    },\n    commentInput: function () {\n      return import(\n        /* webpackChunkName: \"components/comment-input/comment-input\" */ \"@/components/comment-input/comment-input.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.dataList.length === 0 && _vm.loading === 1\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./comment-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./comment-list.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"list-wrap bg-white radius-10 mt-2 px-2\">\n\t\t<!-- loading -->\n\t\t<view v-if=\"loading===0\" class=\"x-center py-2\">\n\t\t\t<u-loadmore status=\"loading\" />\n\t\t</view>\n\t\t<!-- 暂无评论 -->\n\t\t<view v-if=\"dataList.length===0 && loading===1\" class=\"x-center pb-2\">\n\t\t\t<u-empty text=\"还没有人评论，抢沙发～\" icon-size=\"320\"\n\t\t\t\tsrc=\"/static/images/data-bg-comment.png\" />\n\t\t</view>\r\n\t\t<!-- 评论列表 -->\n\t\t<div v-for=\"(item,i) in dataList\" :key=\"i\" class=\"row py-3 u-border-top\">\r\n\t\t\t<u-avatar @click=\"goUserProfilePage(item)\" size=\"72\" :src=\"item.userAvatar\" />\r\n\t\t\t<view class=\"flex-1 ml-2\">\r\n\t\t\t\t<view class=\"row align-center\">\r\n\t\t\t\t\t<view class=\"row align-center\">\n\t\t\t\t\t\t<text style=\"color:#636363\">{{item.userNickname}}</text>\n\t\t\t\t\t\t<view class=\"x-center mx-1\">\n\t\t\t\t\t\t\t<u-icon :name=\"`/static/images/sex-${item.userSex||0}.png`\" size=\"24\" />\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"x-center\">\r\n\t\t\t\t\t\t<u-rate v-model=\"item.userStarLevel\" size=\"24\" \n\t\t\t\t\t\t\tactive-color=\"#F3D958\" disabled />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"mt-08 font-15\">\r\n\t\t\t\t\t{{item.comment}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"row align-center justify-between mt-1 color3\">\r\n\t\t\t\t\t<view class=\"row align-center font-12\">\r\n\t\t\t\t\t\t<text>{{item.createDate}}</text>\r\n\t\t\t\t\t\t<text class=\"u-border-left ml-1 pl-1\">来自{{item.comeFrom}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"row align-center font-12\">\r\n\t\t\t\t\t\t<view class=\"x-center pr-1\">\r\n\t\t\t\t\t\t\t<u-icon :label=\"item.replyCount\" name=\"chat\" color=\"#999\" \n\t\t\t\t\t\t\t\tlabel-color=\"#999\" label-size=\"24\" size=\"24\"\r\n\t\t\t\t\t\t\t\tlabel-pos=\"right\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"x-center pl-1\">\r\n\t\t\t\t\t\t\t<u-icon @click=\"btnSwitchLike(item.id)\" :label=\"item.likesCount\" \n\t\t\t\t\t\t\t\tname=\"thumb-up\" color=\"#999\" \n\t\t\t\t\t\t\t\tlabel-color=\"#999\" label-size=\"24\" size=\"24\"\r\n\t\t\t\t\t\t\t\tlabel-pos=\"right\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</div>\r\n\t\t<!-- 转发/评论 -->\n\t\t<comment-input :isCollect=\"isCollect\" \n\t\t\t@confirm=\"btnAddComment\" @collect=\"btnCollect\" />\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: \"comment-list\",\n\t\tprops:{\n\t\t\ttid:{\n\t\t\t\ttype:String\n\t\t\t},\n\t\t\ttype:{\n\t\t\t\ttype:String\n\t\t\t},\n\t\t\tcollect:{\n\t\t\t\ttype:Boolean,\n\t\t\t\tdefault:false\n\t\t\t},\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\n\t\t\t\tloading:0,\r\n\t\t\t\tdataList: [],\n\t\t\t\tisCollect:false\r\n\t\t\t};\r\n\t\t},\n\t\tcreated(){\n\t\t\tthis.getDataList()\n\t\t},\n\t\twatch:{\n\t\t\tcollect:{\n\t\t\t\thandler(newVal, oldVal) {\n\t\t\t\t\t// 首次加载时也会执行\n\t\t\t\t\tthis.isCollect = newVal\n\t\t\t\t\tconsole.log('collect',this.isCollect,newVal)\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\t// 获取详情数据\n\t\t\tgetDataList() {\n\t\t\t\tconst data = {\n\t\t\t\t\ttargetId: this.tid,\n\t\t\t\t\tcommentType: this.type\n\t\t\t\t}\n\t\t\t\tthis.$api.getCommentList(data).then(res => {\n\t\t\t\t\tlet dataList = res.data.list\n\t\t\t\t\tif(!dataList){\n\t\t\t\t\t\tdataList = []\n\t\t\t\t\t}\n\t\t\t\t\tthis.dataList = dataList\n\t\t\t\t\tthis.loading = 1\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 添加评论\n\t\t\tbtnAddComment(content){\n\t\t\t\tconst data = {\n\t\t\t\t\tcomment: content,\n\t\t\t\t\ttargetId: this.tid,\n\t\t\t\t\tcommentType: this.type\n\t\t\t\t}\n\t\t\t\tconsole.log('btnAddComment',data)\n\t\t\t\tconst checkData = {content,type:2,openid:this._userInfo.openId}\n\t\t\t\tthis.$api.msgSecCheck(checkData).then(res => {\n\t\t\t\t\tconsole.log('msgSecCheck',res)\n\t\t\t\t\tif(res.data.errcode===0){\n\t\t\t\t\t\tthis.$api.saveComment(data).then(res => {\n\t\t\t\t\t\t\tthis.getDataList()\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$u.toast('内容不通过')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 收藏/取消收藏\n\t\t\tbtnCollect(){\n\t\t\t\tconst data = {\n\t\t\t\t\ttargetId: this.tid,\n\t\t\t\t\tfavoritesType: this.type\n\t\t\t\t}\n\t\t\t\tconsole.log('btnCollect',data)\n\t\t\t\t// return\n\t\t\t\tthis.$api.saveCollect(data).then(res => {\n\t\t\t\t\tthis.isCollect = !this.isCollect\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 点赞或取消\n\t\t\tbtnSwitchLike(id){\n\t\t\t\tthis.$api.switchLike(id).then(res => {\n\t\t\t\t\tthis.getDataList()\n\t\t\t\t})\n\t\t\t},\n\t\t\tgoUserProfilePage(item){\n\t\t\t\tconsole.log('this.item',item)\n\t\t\t\tconst userId = item.userId||item.id\n\t\t\t\tthis.$u.route('/pages/index/userProfile',{\n\t\t\t\t\tid: userId\n\t\t\t\t})\n\t\t\t},\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"sourceRoot":""}